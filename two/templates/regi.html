{% load static %}

<title>Registration</title>

{% block links %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-7c3IFV8UbvW+dpj2Hgh0Rvv+HC0jXJj9viK5tH0HHo3zvHvoqia8qqwNUcU4y1dSx3Hx/3RZqtfP3QfZ4d0dZw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
{% endblock links %}

{% block style %}

<style>
  @import url('https://fonts.googleapis.com/css?family=Poppins:400,500,600,700&display=swap');
  *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Poppins', sans-serif;
  }
  body{
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #4070f4;
  }
  .wrapper{
    position: relative;
    max-width: 430px;
    width: 100%;
    background: #fff;
    padding: 34px;
    border-radius: 6px;
    box-shadow: 0 5px 10px rgba(0,0,0,0.2);
  }
  .wrapper h2{
    position: relative;
    font-size: 22px;
    font-weight: 600;
    color: #333;
  }
  .wrapper h2::before{
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    height: 3px;
    width: 28px;
    border-radius: 12px;
    background: #4070f4;
  }
  .wrapper form{
    margin-top: 30px;
  }
  .wrapper form .input-box{
    height: 52px;
    margin: 18px 0;
  }
  form .input-box input{
    height: 100%;
    width: 100%;
    outline: none;
    padding: 0 15px;
    font-size: 17px;
    font-weight: 400;
    color: #333;
    border: 1.5px solid #C7BEBE;
    border-bottom-width: 2.5px;
    border-radius: 6px;
    transition: all 0.3s ease;
  }
  .input-box input:focus,
  .input-box input:valid{
    border-color: #4070f4;
  }
  form .policy{
    display: flex;
    align-items: center;
  }
  form h3{
    color: #707070;
    font-size: 14px;
    font-weight: 500;
    margin-left: 10px;
  }
  .input-box.button input{
    color: #fff;
    letter-spacing: 1px;
    border: none;
    background: #4070f4;
    cursor: pointer;
  }
  .input-box.button input:hover{
    background: #0e4bf1;
  }
  form .text h3{
   color: #333;
   width: 100%;
   text-align: center;
  }
  form .text h3 a{
    color: #4070f4;
    text-decoration: none;
  }
  form .text h3 a:hover{
    text-decoration: underline;
  }
  
   the option buttons 
  .btn-user-type {
    padding: 10px 20px;
    margin-right: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #f9f9f9;
    cursor: pointer;
  }
  
  .btn-user-type i {
    margin-right: 5px;
  }
  
  .btn-user-type.active {
    background-color: #007bff;
    color: #fff;
    border-color: #007bff;
  }
  
  .input-box {
    margin-bottom: 10px;
  }
  
  .policy {
    margin-top: 20px;
  }
  
  /* Adjustments for responsiveness */
  @media (max-width: 768px) {
    .text-center.text-lg-start {
        text-align: center;
    }
  }
.form-part {
  display: none;
}

.form-part.active {
  display: block;
}

.nav-buttons {
  display: flex;
  justify-content: space-between;
  margin-top: 20px;
}

.nav-button {
  padding: 10px 20px;
  background-color: #4070f4;
  color: white;
  border: none;
  border-radius: 5px;
  cursor: pointer;
}

.nav-button:hover {
  background-color: #0e4bf1;
}

.nav-button:disabled {
  background-color: #ccc;
  cursor: not-allowed;
}
</style>
{% endblock style %}

{% block content %}
<div class="wrapper">
  <h2>Registration</h2>
  {% if messages %}
      {% for message in messages %}
      <div {% if message.tags %} class="alert alert-{{message.tags}}" {% endif %} role="alert">        
        {{message}}
      </div>
      {% endfor %}        
  {% endif %}
  <form action="{% url 'regi' %}" method="POST" id="registrationForm">
    {% csrf_token %}

    <input type="radio" name="user_type" value="0" checked> Guest
    <input type="radio" name="user_type" value="1"> Admin

    <div class="form-part active" id="part1">
      <div class="input-box">
        <input type="text" class="form-control" placeholder="Enter your Full Name" name="full_name" id="username" required>
        <div class="error-message" id="usernameError"></div>
      </div>
      <div class="input-box">
        <input type="email" placeholder="Enter your email" name="email" id="email" required>
        <div class="error-message" id="emailError"></div>
      </div>
      <div class="input-box">
        <input type="password" placeholder="Create password" name="password1" id="password1" required>
        <div class="error-message" id="password1Error"></div>
      </div>
      <div class="input-box">
        <input type="password" placeholder="Confirm password" name="password2" id="password2" required>
        <div class="error-message" id="password2Error"></div>
      </div>
    </div>

    <div class="form-part" id="part2">
      <div class="input-box">
        <input type="tel" placeholder="Enter your Phone number" name="contact" required>
      </div>
      <div class="input-box">
        <input type="text" placeholder="Enter your Address" name="address" required>
      </div>
      <div class="input-box">
        <input type="text" placeholder="Enter your State" name="state" required>
      </div>
      <div class="input-box">
        <input type="text" placeholder="Enter your City" name="city" required>
      </div>
      <div class="input-box">
        <input type="text" placeholder="Enter your bio" name="bio" required>
      </div>
      <div class="input-box">
        <input type="date" placeholder="Enter your Date of Birth" name="dob" required>
      </div>
      <div class="policy">
        <input type="checkbox" required>
        <h3>I accept all terms & condition</h3>
      </div>
    </div>

    <div class="nav-buttons">
      <button type="button" id="prevBtn" class="nav-button" onclick="navigate(-1)" disabled>Previous</button>
      <button type="button" id="nextBtn" class="nav-button" onclick="validateAndNavigate(1)">Next</button>
    </div>

    <div class="input-box button">
      <input type="submit" value="Register Now" id="submitBtn" style="display: none;">
    </div>

    <div class="text-center text-lg-start mt-4 pt-2">
      <a href="{% url 'login' %}"><p class="small fw-bold mt-2 pt-1 mb-0">Already have an account?</p></a>
    </div>
  </form>
</div>


<script>
  let currentPart = 1;
  const totalParts = 2;
  
  function validateAndNavigate(direction) {
    if (direction > 0) {
      if (validatePart1()) {
        navigate(direction);
      }
    } else {
      navigate(direction);
    }
  }
  
  function validatePart1() {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const password1 = document.getElementById('password1').value;
    const password2 = document.getElementById('password2').value;
  
    let isValid = true;
  
    // Reset error messages
    document.getElementById('usernameError').textContent = '';
    document.getElementById('emailError').textContent = '';
    document.getElementById('password1Error').textContent = '';
    document.getElementById('password2Error').textContent = '';
  
    if (username === '') {
      document.getElementById('usernameError').textContent = 'Full Name is required';
      isValid = false;
    }
  
    if (email === '') {
      document.getElementById('emailError').textContent = 'Email is required';
      isValid = false;
    } else if (!isValidEmail(email)) {
      document.getElementById('emailError').textContent = 'Invalid email format';
      isValid = false;
    }
  
    if (password1 === '') {
      document.getElementById('password1Error').textContent = 'Password is required';
      isValid = false;
    }
  
    if (password2 === '') {
      document.getElementById('password2Error').textContent = 'Confirm Password is required';
      isValid = false;
    } else if (password1 !== password2) {
      document.getElementById('password2Error').textContent = 'Passwords do not match';
      isValid = false;
    }
  
    return isValid;
  }
  
  function isValidEmail(email) {
    // Basic email validation regex
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return emailRegex.test(email);
  }
  
  function navigate(direction) {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const submitBtn = document.getElementById('submitBtn');
  
    currentPart += direction;
  
    document.getElementById(`part${currentPart - direction}`).classList.remove('active');
    document.getElementById(`part${currentPart}`).classList.add('active');
  
    prevBtn.disabled = (currentPart === 1);
    
    if (currentPart === totalParts) {
      nextBtn.style.display = 'none';
      submitBtn.style.display = 'block';
    } else {
      nextBtn.style.display = 'block';
      submitBtn.style.display = 'none';
    }
  }
  </script>
{% endblock content %}

















